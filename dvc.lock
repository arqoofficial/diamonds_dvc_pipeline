schema: '2.0'
stages:
  drop-dup:
    cmd: python3 scripts/data_scripts/drop_dup.py data/raw/diamonds.csv
    deps:
    - path: data/raw/diamonds.csv
      hash: md5
      md5: bb67f2679c70a62b35220f7e90a6174a
      size: 3192560
    - path: scripts/data_scripts/drop_dup.py
      hash: md5
      md5: 50f8ab478a1b9a33462901e35b3dbb58
      size: 1173
    outs:
    - path: data/stage1/
      hash: md5
      md5: ecca97e1e526cb852d82e606350ace0d.dir
      size: 2565059
      nfiles: 1
  drop-na:
    cmd: python3 scripts/data_scripts/drop_na.py data/stage1/diamonds.csv
    deps:
    - path: data/stage1/diamonds.csv
      hash: md5
      md5: a914e1a1f8a4605df22bc632448b85e0
      size: 2565059
    - path: scripts/data_scripts/drop_na.py
      hash: md5
      md5: 243afceec655083db1e0f53ff05a66df
      size: 1105
    outs:
    - path: data/stage2/
      hash: md5
      md5: ecca97e1e526cb852d82e606350ace0d.dir
      size: 2565059
      nfiles: 1
  drop-outliers:
    cmd: python3 scripts/data_scripts/drop_outliers.py data/stage2/diamonds.csv
    deps:
    - path: data/stage2/diamonds.csv
      hash: md5
      md5: a914e1a1f8a4605df22bc632448b85e0
      size: 2565059
    - path: scripts/data_scripts/drop_outliers.py
      hash: md5
      md5: c3033ea58a713141e6504fede8cf5658
      size: 1889
    params:
      params.yaml:
        drop_outliers.carat.max:
        drop_outliers.carat.min:
        drop_outliers.depth.max:
        drop_outliers.depth.min:
        drop_outliers.price.max:
        drop_outliers.price.min:
        drop_outliers.table.max:
        drop_outliers.table.min:
        drop_outliers.x.min:
        drop_outliers.y.max:
        drop_outliers.z.max:
    outs:
    - path: data/stage3/
      hash: md5
      md5: ecca97e1e526cb852d82e606350ace0d.dir
      size: 2565059
      nfiles: 1
  preprocessors:
    cmd: python3 scripts/data_scripts/preprocessors.py data/stage3/diamonds.csv
    deps:
    - path: data/stage3/diamonds.csv
      hash: md5
      md5: a914e1a1f8a4605df22bc632448b85e0
      size: 2565059
    - path: scripts/data_scripts/preprocessors.py
      hash: md5
      md5: 0616922b9646b98c1d31d134ec70d69d
      size: 3111
    params:
      params.yaml:
        preprocessors.PF_degree: 1
        preprocessors.PF_interaction: false
        preprocessors.scalers: standard
        preprocessors.target: price
    outs:
    - path: data/stage4/
      hash: md5
      md5: b93a451ec16392961ef9d5194e54eafa.dir
      size: 10892902
      nfiles: 1
  split:
    cmd: python3 scripts/data_scripts/train_test_split.py data/stage4/diamonds.csv
    deps:
    - path: data/stage4/diamonds.csv
      hash: md5
      md5: 838811675bd175b1bd81320443c17c3d
      size: 10892902
    - path: scripts/data_scripts/train_test_split.py
      hash: md5
      md5: 7502d640513045267e54f21aea96db89
      size: 2085
    params:
      params.yaml:
        split.seed: 42
        split.split_ratio: 0.3
        split.target: price
    outs:
    - path: data/stage5/
      hash: md5
      md5: aeac0fee5bfb7b08fe374029eee57cd5.dir
      size: 10796824
      nfiles: 2
  train:
    cmd: python3 scripts/model_scripts/model_knr.py data/stage5/train.csv model_knr
    deps:
    - path: data/stage5/train.csv
      hash: md5
      md5: d9a029405c0ffff78686cb0ced31fb7b
      size: 7557355
    - path: scripts/model_scripts/model_knr.py
      hash: md5
      md5: 403914c9ce062e4c6786641530c3dac3
      size: 1999
    params:
      params.yaml:
        train.n_neighbors: 7
        train.target: price
        train.weights: uniform
    outs:
    - path: models/
      hash: md5
      md5: fa83c89cca532a24b234adbcee8e923a.dir
      size: 8134775
      nfiles: 1
  evaluate:
    cmd: python3 scripts/model_scripts/evaluate.py data/stage5/train.csv models/model_knr.pkl
    deps:
    - path: data/stage5/test.csv
      hash: md5
      md5: ce0c424d5414f7dcd9544595309bd52c
      size: 3239469
    - path: models/model_knr.pkl
      hash: md5
      md5: ed6ab21715cae0b90f221d9e93e68fc5
      size: 8134775
    - path: scripts/model_scripts/evaluate.py
      hash: md5
      md5: 275765a71e2e4d4c080126233b3b443a
      size: 2798
    params:
      params.yaml:
        train.n_neighbors: 7
        train.target: price
        train.weights: uniform
    outs:
    - path: evaluate/
      hash: md5
      md5: 073d001e07718ac6b18cbfac1ba42358.dir
      size: 60
      nfiles: 1
